webpackJsonp([3],{Z4po:function(e,r){},jT7l:function(e,r,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=s("Xxa5"),a=s.n(t),o=s("exGp"),i=s.n(o),n=s("0jG4"),m=s("oAV5").a.storage,c={name:"Login",data:function(){return{loading:!1,remember:!0,code:"/api/login/checkcode",forms:{userName:"",password:"",img:""},rules:{userName:{required:!0,message:"The userName cannot be empty",trigger:"blur"},password:{required:!0,message:"The password cannot be empty",trigger:"blur"},img:{required:!0,message:"The checkcode cannot be empty",trigger:"blur"}}}},created:function(){this.initPwdLocal()},methods:{resetCode:function(){this.code=this.code+"?t="+ +new Date,this.forms.img=""},submit:function(){var e=this;return i()(a.a.mark(function r(){var s,t;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$refs.forms.validate();case 2:if(r.sent){r.next=5;break}return r.abrupt("return");case 5:return e.loading=!0,r.prev=6,r.next=9,n.e.login(e.$QS.stringify(e.forms));case 9:s=r.sent,t=s.data,e.loading=!1,e.$Message.success("登录成功"),e.pwdlocal(),e.$store.commit("users/users",t),e.$router.replace({name:"User"}),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(6),e.loading=!1,e.resetCode();case 22:case"end":return r.stop()}},r,e,[[6,18]])}))()},pwdlocal:function(){this.remember?(m.setLocal("password",this.forms.password),m.setLocal("userName",this.forms.userName)):(m.setLocal("password",""),m.setLocal("userName",""))},initPwdLocal:function(){this.remember&&(this.forms.password=m.getLocal("password")||"",this.forms.userName=m.getLocal("userName")||"")}}},l={render:function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{attrs:{id:"login"}},[s("div",{staticClass:"login-mask"}),e._v(" "),s("div",{staticClass:"form-wrap"},[e._m(0),e._v(" "),s("Form",{ref:"forms",attrs:{model:e.forms,rules:e.rules}},[s("FormItem",{attrs:{prop:"userName"}},[s("Input",{attrs:{size:"large",placeholder:"请输入账号/邮箱"},model:{value:e.forms.userName,callback:function(r){e.$set(e.forms,"userName","string"==typeof r?r.trim():r)},expression:"forms.userName"}})],1),e._v(" "),s("FormItem",{attrs:{prop:"password"}},[s("Input",{attrs:{type:"password",size:"large",placeholder:"请输入密码"},model:{value:e.forms.password,callback:function(r){e.$set(e.forms,"password","string"==typeof r?r.trim():r)},expression:"forms.password"}})],1),e._v(" "),s("FormItem",{staticClass:"form-margin",attrs:{prop:"img"}},[s("div",{staticClass:"form-code"},[s("Input",{attrs:{size:"large",placeholder:"请输入验证码"},model:{value:e.forms.img,callback:function(r){e.$set(e.forms,"img","string"==typeof r?r.trim():r)},expression:"forms.img"}}),e._v(" "),s("img",{staticClass:"checkcode",attrs:{width:"100",height:"40",src:e.code,alt:"验证码"},on:{click:e.resetCode}})],1)]),e._v(" "),s("FormItem",{staticClass:"form-margin"},[s("Checkbox",{attrs:{size:"large"},model:{value:e.remember,callback:function(r){e.remember=r},expression:"remember"}},[e._v("\n                    记住密码\n                ")])],1),e._v(" "),s("FormItem",{staticClass:"form-margin"},[s("Button",{attrs:{loading:e.loading,size:"large",long:"",type:"primary"},on:{click:e.submit}},[e._v("登录")])],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,r=this._self._c||e;return r("p",[r("span",[this._v("Admin Login")])])}]};var u=s("VU/8")(c,l,!1,function(e){s("Z4po")},null,null);r.default=u.exports}});