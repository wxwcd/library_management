webpackJsonp([13],{"DeQ/":function(e,t){},Egvx:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),s=a.n(r),o=a("exGp"),n=a.n(o),i=a("Dd8w"),l=a.n(i),c=a("0jG4"),p={mixins:[a("9WlX").a],props:{modal:Object},watch:{"modal.show":{handler:function(){if(this.modal.show&&this.modal.row){this.modal.row.isAdmin=this.modal.row.isAdmin+"";var e=this.modal.row,t=e.category,a=e.press;return this.params=l()({},this.params,this.modal.row,{category:t?t._id:"",press:a?a._id:""})}this.modal.row=null},immediate:!0}},data:function(){return{params:this.initData(),categoryList:[],pressList:[],rules:{name:{type:"string",required:!0,message:"必填项"},category:{type:"string",required:!0,message:"必填项"},press:{type:"string",required:!0,message:"必填项"},author:{type:"string",required:!0,message:"必填项"},stock:{type:"number",required:!0,message:"必填项"}}}},created:function(){this.getCategoryAll(),this.getPressAll()},methods:{initData:function(){return{_id:void 0,name:"",category:"",press:"",author:"",stock:"",desc:"",borrowStatus:"0"}},modalOk:function(){var e=this;return n()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.form.validate();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:if(e.params._id){t.next=10;break}return t.next=8,e.create();case 8:t.next=12;break;case 10:return t.next=12,e.update();case 12:e.$Message.success("提交成功！"),e.initModal("ok");case 14:case"end":return t.stop()}},t,e)}))()},create:function(){var e=this;return n()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.create(e.$QS.stringify(e.params));case 2:a=t.sent,a.data;case 4:case"end":return t.stop()}},t,e)}))()},update:function(){var e=this;return n()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.update(e.$QS.stringify(e.params));case 2:a=t.sent,a.data;case 4:case"end":return t.stop()}},t,e)}))()},cancel:function(){this.initModal("cancel")},initModal:function(e){this.params=this.initData(),this.modal.show=!1,this.$refs.form.resetFields(),this.$emit(e)}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{top:"5%",width:"500",title:this.params._id?"编辑":"新增"},on:{"on-ok":e.modalOk,"on-cancel":e.cancel},model:{value:e.modal.show,callback:function(t){e.$set(e.modal,"show",t)},expression:"modal.show"}},[a("div",{staticClass:"modal-form"},[a("Form",{ref:"form",attrs:{model:e.params,rules:e.rules,labelWidth:80}},[a("FormItem",{attrs:{label:"书名",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入书名"},model:{value:e.params.name,callback:function(t){e.$set(e.params,"name",t)},expression:"params.name"}})],1),e._v(" "),a("FormItem",{attrs:{label:"类别",prop:"category"}},[a("Select",{attrs:{filterable:""},model:{value:e.params.category,callback:function(t){e.$set(e.params,"category",t)},expression:"params.category"}},e._l(e.categoryList,function(t){return a("Option",{key:t._id,attrs:{value:t._id}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"出版社",prop:"press"}},[a("Select",{attrs:{filterable:""},model:{value:e.params.press,callback:function(t){e.$set(e.params,"press",t)},expression:"params.press"}},e._l(e.pressList,function(t){return a("Option",{key:t._id,attrs:{value:t._id}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"作者",prop:"author"}},[a("Input",{attrs:{placeholder:"请输入作者"},model:{value:e.params.author,callback:function(t){e.$set(e.params,"author",t)},expression:"params.author"}})],1),e._v(" "),a("FormItem",{attrs:{label:"状态",prop:"borrowStatus"}},[a("RadioGroup",{model:{value:e.params.borrowStatus,callback:function(t){e.$set(e.params,"borrowStatus",t)},expression:"params.borrowStatus"}},[a("Radio",{attrs:{label:"0"}},[a("span",[e._v("未借出")])]),e._v(" "),a("Radio",{attrs:{label:"1"}},[a("span",[e._v("已借出")])])],1)],1),e._v(" "),a("FormItem",{attrs:{label:"简介",prop:"desc"}},[a("Input",{attrs:{type:"textarea",rows:6,placeholder:"简介"},model:{value:e.params.desc,callback:function(t){e.$set(e.params,"desc",t)},expression:"params.desc"}})],1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:e.modalOk}},[e._v("确定")]),e._v(" "),a("Button",{attrs:{type:"ghost"},on:{click:e.cancel}},[e._v("取消")])],1)])},staticRenderFns:[]};var m=a("VU/8")(p,u,!1,function(e){a("DeQ/")},null,null);t.default=m.exports}});